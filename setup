#!/bin/bash

BASHCFG=bashrc_customized

do_backup()
{
  tod=$(date +%Y%m%d%H%M%S)
  [ -f ${1} ] && mv ${1} ${1}.${tod}
}

config_vim()
{
  if wget --no-check-certificate \
     https://raw.githubusercontent.com/VundleVim/Vundle.vim/master/README.md \
     -O .m_a_gic
     > /dev/null; then
    rm -rf .m_a_gic
    echo "Clone Vundle"
    git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
  else
    echo "Cannot clone Vundle.vim"
    echo "git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim"
    echo "You may do it manually"
  fi
  do_backup ${HOME}/.vimrc
  cp vimrc ~/.vimrc

}


# echo "Customizing VIM config ..."
# if [ -d ${HOME}/.vim ]; then
#     cp -r ${PWD}/vim/* ${HOME}/.vim/
# else
#     cp -r ${PWD}/vim ${HOME}/.vim
# fi


echo "Customizing bash config ..."
# customized bashrc
do_backup ${HOME}/.${BASHCFG}
cp ${BASHCFG} ~/.${BASHCFG}
echo -e "\n# customized bashrc" >> ~/.bashrc
echo ". ~/.${BASHCFG}" >> ~/.bashrc
# effect immediately
. ~/.${BASHCFG}

echo "Done"
